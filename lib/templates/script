#!/bin/sh
set -e

NAME=<PACMAN.NAME>
VERSION=<PACMAN.VERSION>
SHARE=<PACMAN.SHARE>
ACTION=<PACMAN.ACTION>
SYSROOT=<PACMAN.SYSROOT>
CONFIG=<PACMAN.CONFIG>
[ "$1" = cmake ] && CMAKE_BINARY_DIR="$2" || CMAKE_BINARY_DIR=

PEON=$(node -e "process.stdout.write (require ('path').resolve (__dirname, '$SYSROOT', require (require ('path').resolve (__dirname, '$SYSROOT', '$CONFIG')).bin));")

node "$PEON" "$(pwd)" "$SHARE" $ACTION "$CMAKE_BINARY_DIR" "$NAME" "$VERSION"
